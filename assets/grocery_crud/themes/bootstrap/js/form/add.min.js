function clearForm(){$("#crudForm").find(":input").each(function(){switch(this.type){case"password":case"select-multiple":case"select-one":case"text":case"textarea":$(this).val("");break;case"checkbox":case"radio":this.checked=!1}}),$(".open-file,.gc-file-upload,.hidden-upload-input").each(function(){$(this).val("")}),$(".upload-success-url").hide(),$(".fileinput-button").fadeIn("normal"),$(".remove-all").each(function(){$(this).trigger("click")}),$(".chosen-multiple-select, .chosen-select, .ajax-chosen-select").each(function(){$(this).trigger("liszt:updated")})}function form_success_message(a){$("#report-success").slideUp("fast"),$("#report-success").html(a),$("#report-success").slideDown("normal"),$("#report-error").slideUp("fast").html("")}function form_error_message(a){$("#report-error").slideUp("fast"),$("#report-error").html(a),$("#report-error").slideDown("normal"),$("#report-success").slideUp("fast").html("")}jQuery(function(a){var b,c=!1,d=null;b=a("#crudForm>input[type=hidden]:first"),1===b.length&&(d={name:b.attr("name"),value:b.val(),csrf_cookie_name:csrf_cookie_name},(void 0===d.name||void 0===d.value||""===d.csrf_cookie_name)&&(d=null)),a(".ptogtitle").click(function(){a(this).hasClass("vsble")?(a(this).removeClass("vsble"),a("#main-table-box #crudForm").slideDown("slow")):(a(this).addClass("vsble"),a("#main-table-box #crudForm").slideUp("slow"))}),a("#save-and-go-back-button").click(function(){c=!0,a("#crudForm").trigger("submit")}),a("#crudForm").submit(function(){var e=a(this);return null!==d&&b.val(getCookie(d.csrf_cookie_name)),a(this).ajaxSubmit({url:validation_url,dataType:"json",cache:"false",beforeSend:function(){a("#FormLoading").show()},success:function(f){a("#FormLoading").hide(),null!==d&&b.val(getCookie(d.csrf_cookie_name)),f.success?a("#crudForm").ajaxSubmit({dataType:"text",cache:"false",beforeSend:function(){a("#FormLoading").show()},success:function(b){if(a("#FormLoading").fadeOut("slow"),f=a.parseJSON(b),f.success){var d=e.closest(".flexigrid").attr("data-unique-hash");if(a(".flexigrid[data-unique-hash="+d+"]").find(".ajax_refresh_and_loading").trigger("click"),c)return 0===a("#save-and-go-back-button").closest(".ui-dialog").length?window.location=f.success_list_url:(a(".ui-dialog-content").dialog("close"),success_message(f.success_message)),!0;a(".field_error").each(function(){a(this).removeClass("field_error")}),clearForm(),form_success_message(f.success_message)}else alert(message_insert_error)},error:function(){alert(message_insert_error),a("#FormLoading").hide()}}):(a(".has-error").removeClass("has-error"),form_error_message(f.error_message),a.each(f.error_fields,function(b){a("input[name="+b+"]").closest(".form-group").addClass("has-error")}))},error:function(){null!==d&&b.val(getCookie(d.csrf_cookie_name)),error_message(message_insert_error),a("#FormLoading").hide()}}),!1}),0===a("#cancel-button").closest(".ui-dialog").length&&a("#cancel-button").click(function(){return window.location=list_url,!1})});